# 前提
	- 公司APP在微信开方平台  申请第三方授权的合作， 得到  **client id【客户端用】 ** **和**** client secret【服务器用】**
- # 具体流程
	- 1、⽤户在使⽤黑岩小说 App 时，[[#red]]==**点击「通过微信登录」**==，黑岩小说   将使⽤微 信 SDK ==**跳转到微信**==，并[[#red]]==**传⼊⾃⼰的 client id 作为⾃⼰的身份标识**==
	- 2、[[#red]]==**微信通过和微信服务器交互**==，[[#red]]==**拿到黑岩小说   的信息**==【图标名字】，并显示在界⾯中，然后 [[#red]]==**询问⽤户是否同意授权该 App 使⽤微信来登录**==
	- 3、⽤户点击「使⽤微信登录」后，微信和微信服务器交互将授权信息提交，然后跳 转回黑岩 ，[[#red]]==**并传⼊ Authorization code（微信返回的） 作为⽤户认可的凭证**==
	- 4   黑岩  调⽤⾃⼰服务器的「微信登录」 Api ，并传⼊ [[#red]]==**Authorization  code**== ，然后等待服务器的响应   【剩下的登录操作都交给自己服务器 与微信服务器交互了】
	- 5  自己 [[#red]]==**服务器**== 拿客户端发来的 Authorization code [[#red]]==**去向微信的第三 ⽅授权接⼝**==发送请求，[[#red]]==**将 Authorization code 和⾃⼰的 client secret ⼀起 作为参数发送**==，微信在验证通过后，[[#red]]==**返回 access token**==  【授权完成了OAuth2 在这里就结束了 】
	- 6  自己 服务器在收到 access token 后，⽴即拿着 access token 去向微信的⽤户信 息接⼝发送请求，微信验证通过后，返回⽤户信息
	- 7  自己 服务器在收到⽤户信息后，在⾃⼰的数据库中为⽤户创建⼀个账户，并使⽤ 从微信服务器拿来的⽤户信息填⼊⾃⼰的数据库，以及将⽤户的 ID 和⽤户 的微信 ID 做关联
	- 8  ⽤户创建完成后，服务器向客户端的之前登录接口请求发送响应，传送回刚创建好的⽤户 信息
	- 9 客户端收到服务器响应，⽤户登录成功