- **[[#red]]==第一步：MainActivity 调用 requestPermissions 进行动态权限申请==**；
- [[#red]]==**第二步：requestPermissions函数通过隐式意图，调用系统的权限申请界面，让用户选择是否授权**==；
- **[[#red]]==第三步：经过PKMS把相关信息传递给PermissionManagerService处理==**；
- 第四步：PermissionManagerService处理结束后[[#red]]==**回调给---->PKMS中的onPermissionGranted**==方法把处理结果返回；
- 第五步：[[#red]]==**PKMS通知过程中权限变化**==，并调用writeRuntimePermissionsForUserLPr函数让[[#red]]==**PackageManager的settings记录下相关授 权信息；动态权限的.xm**==l
-