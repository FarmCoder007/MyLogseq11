# 一、Metax组件化
	- ## 介绍
		- 开发的一套增强版的组件化框架，它制定了一系列的标准和规范，来解决现有组件化工程
		- [[#red]]==**测试成本高**==
			- SDK改动一点，依赖的该组件的都得通知测试
			- 现在测试SDK就行了。提示出变动API
		- [[#red]]==**api 无法保证向下兼容**==
			- API变动校验，编译期强提示
		- [[#red]]==**差异化定制与重构成本高**==
			- APT 静态代理实现代理基类
		- 无法感知变动细节
		- [[#red]]==**业务线编译调试耦合平台环境**==等问题。
			- 每个都是一个可独立运行的SDK，开发期间使用复合构建
		- 对于这些标准和规范，MetaX 框架提供了一套全自动化的脚本工具保障它们可以正常稳定地运转。
	- ## 提供的能力
		- 1、api库与实现库解耦，组件间通信通过对外api接口包装工具类，消息总线等
		- 2、定义依赖规范
			- api 库使用其他组件的能力：依赖其他组件的 api 库，而不能依赖其实现库
			- lib 库使用其他组件的能力：依赖其他组件的 api 库，而不能依赖其实现库
			- 打包工程依赖于各组件的 lib 库
		- 3、对外 api 变更检测
			- 开发编译期会自动检测对外 api 的向下兼容性，MetaX 只允许每年升级一次组件的主版本号统一进行 api 变更，可以新增不能修改
	- ## **负责相关功能：**
		- ## 1、组件间通信：通过APT编译器生成接口包装工具类模版代码，内部通过WBRouter依赖注入查找API实现类
		- ## 2、静态代理解决API差异化问题：APT编译期生成代理基类，实现静态代理逻辑。使用方有差异化需求只需继承代理基类，并注册
			- 动态代理是运行时反射，影响性能。而且静态代理基类都是APT生成的，所以不麻烦
		- ## 3、开发自动迁移Androidx，python脚本
			- # [[Python开发自动迁移Androidx脚本]]
		- ## 4、 [[API变更检测总结]]
- # 二、统一日志库
	- ## **介绍：**
		- 现有日志库有很多痛点，排查问题难，各模块日志tag和格式不统一、日志缺少关键信息（机型、网络、关联log的上下文等）、日志格式不统一、
	- ## **负责相关功能：**
		- 1、==**闭包拼接message信息**==：线上环境不会输出带参数的message，所以不会执行对应参数拼接，避免log中的NPE和不必要的性能损耗
		- 2、[[#red]]==**运行时按模块提示TAG信息**==：注解声明每个模块配置的TAG，APT编译期生成TAG配置类，通过ASM实现自动注册TAG类。运行时统一提示所有模块下支持的TAG便于问题排查
		- 3、[[#green]]==**Hook能力**==：对外提供hook 统一日志库Log Api能力,可统一添加日志参数
		- 4、[[#blue]]==**运行时获取堆栈信息**==：填充debug环境下的log上下文（method　　class）
		- 5、[[#green]]==**享元设计模式+对象池进行Log对象复用**==